<div class="modal-form">
	<!-- Área de adicionar (primeiro) -->
		<div class="upload-wrapper minimal">
				<button type="button" class="btn-add-min" (click)="fileInput.click()" [disabled]="uploadingCount > 0">
					<i class="fa fa-plus"></i>
					<span *ngIf="uploadingCount === 0">Adicionar credenciais</span>
					<span *ngIf="uploadingCount > 0">Enviando ({{ uploadingCount }})...</span>
				</button>
			<input #fileInput id="cred-file" type="file" multiple accept="image/*,application/pdf" (change)="onFileChange($event)" hidden>
		</div>

		<!-- Seção de pendentes removida: uploads automáticos -->

	<!-- Existentes -->
	<div class="existing-list" *ngIf="existing.length > 0">
		<div class="grid">
			<div class="card" *ngFor="let item of existing; let i = index">
				<div class="thumb">
					<img *ngIf="(item.arquivoBase64 || '').startsWith('data:image')" [src]="viewUrl(item)" alt="credencial">
					<img *ngIf="(item.arquivoBase64 || '').startsWith('data:application/pdf')" src="../../../assets/images/PDF.png" alt="pdf">
					<div *ngIf="!(item.arquivoBase64 || '').startsWith('data:')" class="unknown">Arquivo</div>
				</div>
				<div class="meta no-label">
					<div class="actions-small">
						<button class="icon-btn primary" (click)="download(item)" title="Baixar">
							<i class="fa-solid fa-download"></i>
						</button>
						<button class="icon-btn danger" (click)="openDelete(item, i)" title="Remover">
							<i class="fa-solid fa-trash"></i>
						</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Modal de confirmação de exclusão -->
	<div class="cred-modal-backdrop" *ngIf="showDeleteModal">
		<div class="cred-modal" role="dialog" aria-modal="true" aria-labelledby="credModalTitle">
			<div class="cred-modal-header">
				<h5 id="credModalTitle"><i class="fa-solid fa-triangle-exclamation text-warn"></i> Confirmar exclusão</h5>
				<button class="close-btn" (click)="cancelDelete()" aria-label="Fechar">
					<i class="fa-solid fa-xmark"></i>
				</button>
			</div>
			<div class="cred-modal-body">
				<p>Tem certeza que deseja remover esta credencial? Esta ação não pode ser desfeita.</p>
			</div>
			<div class="cred-modal-footer">
				<button class="modal-btn secondary" (click)="cancelDelete()"><i class="fa-solid fa-arrow-left"></i> Cancelar</button>
				<button class="modal-btn danger" (click)="confirmDelete()"><i class="fa-solid fa-trash"></i> Remover</button>
			</div>
		</div>
	</div>

</div>
